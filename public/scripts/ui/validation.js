// Validation helpers
(function(){
  function validateForm(){ const featureId=$('#feature-id').val(); const project=$('#project-select').val(); const team=$('#team-select').val(); const $assigned = $('#assigned-to-select'); const assignedTo = $assigned.val(); const workitemSelect = $('#work-item-type-select').val(); const areaPath=$('#area-path').val(); const iteration=$('#iteration').val(); let isValid=true; $('.form-control').removeClass('is-invalid'); if (!project){ $('#project-select').addClass('is-invalid'); isValid=false; showErrorPopup('Please select a <b>Project</b>...'); return; } if (!team && !noTeamAccess){ $('#team-select').addClass('is-invalid'); isValid=false; showErrorPopup('Please select a <b>Team</b>...'); return; } if (!assignedTo){ $assigned.addClass('is-invalid'); isValid=false; showErrorPopup('Please select a user to assign the work items...'); return; } if (!workitemSelect){ $('#workitem-select').addClass('is-invalid'); isValid=false; showErrorPopup('Please select a work item type.'); return; } if (!areaPath){ $('#area-path').addClass('is-invalid'); isValid=false; } if (!iteration){ $('#iteration').addClass('is-invalid'); isValid=false; } $('.deliverable-item').each(function(){ const title=$(this).find('.deliverable-title').val(); if (!title){ $(this).find('.deliverable-title').addClass('is-invalid'); isValid=false; } }); return isValid; }
  function validateDeliverable(){ const $input=$('.deliverable-item:last').find('.deliverable-title'); const title=$input.val(); const isValid= !!title; $('.form-control').removeClass('is-invalid'); if (!isValid){ $input.addClass('is-invalid'); } return isValid; }
  function validateTask($titleInput, $estimateInput){ const title=$titleInput.val(); const estimate=$estimateInput.val(); const isValidTitle=!!title; const isValidEstimate= estimate!=='' && !isNaN(estimate); $('.form-control').removeClass('is-invalid'); if (!isValidTitle){ $titleInput.addClass('is-invalid'); } if (!isValidEstimate){ $estimateInput.addClass('is-invalid'); } return isValidTitle && isValidEstimate; }
  window.validateForm = validateForm; window.validateDeliverable = validateDeliverable; window.validateTask = validateTask;
})();
